!function t(e,i,n){function s(o,a){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[o]={exports:{}};e[o][0].call(l.exports,function(t){var i=e[o][1][t];return s(i||t)},l,l.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parentElement=e,this.info=i,this.timerID=void 0,this.showInfo=this.showInfo.bind(this),this.hideInfo=this.hideInfo.bind(this),this.getClassProperties=this.getClassProperties.bind(this),this.activateCtrlBtn=this.activateCtrlBtn.bind(this),this.deactivateCtrlBtn=this.deactivateCtrlBtn.bind(this)}return n(t,[{key:"createChildElement",value:function(t,e){var i=document.createElement("div"),n=document.createElement("span"),s=document.createElement("span"),r=document.createTextNode(e),o=document.createTextNode(new Date(Date.now()).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}));return i.className="chat "+t,n.className="content",s.className="time",n.appendChild(r),s.appendChild(o),i.appendChild(n),i.appendChild(s),i}},{key:"elementAppendChild",value:function(t,e){var i=this.createChildElement(t,e);this.parentElement.appendChild(i),this.parentElement.scrollTop=this.parentElement.scrollHeight}},{key:"getClassProperties",value:function(t){return t.className}},{key:"showInfo",value:function(t){this.timerID&&(clearTimeout(this.timerID),this.timerID=void 0),this.info.innerHTML=t,this.info.className="info show",this.timerID=setTimeout(this.hideInfo,4e3)}},{key:"hideInfo",value:function(){this.info.className="info hide"}},{key:"activateCtrlBtn",value:function(t){t.className=this.getClassProperties(t)+" active"}},{key:"deactivateCtrlBtn",value:function(t){var e=this.getClassProperties(t);e=e.replace(/active/gi,""),t.className=e}},{key:"toggleCtrlBtn",value:function(t,e){if(!e.start(t))return!1;-1!=this.getClassProperties(t).indexOf("active")?this.deactivateCtrlBtn(t):this.activateCtrlBtn(t)}}]),t}();i.default=s},{}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.filter=e,this.search=i,this.elements=this.filter.elements,this.json=this.json.bind(this),this.status=this.status.bind(this),this.debug=this.debug.bind(this),this.getData=this.getData.bind(this),this.wikiSearch=this.wikiSearch.bind(this),this.welcomeMsg=this.welcomeMsg.bind(this),this.showReponseData=this.showReponseData.bind(this),this.showErrorInfo=this.showErrorInfo.bind(this),this.boltMsg=this.boltMsg.bind(this)}return s(t,[{key:"debug",value:function(t){return console.log(t),t}},{key:"welcomeMsg",value:function(){fetch("/bolt/api/welcome/").then(this.status).then(this.json).then(this.showReponseData).catch(this.showErrorInfo)}},{key:"wikiSearch",value:function(t){var e="https://en.wikipedia.org/w/api.php?\n      origin=*&action=opensearch&search="+encodeURIComponent(t);fetch(e).then(this.status).then(this.json).then(this.showReponseData).catch(this.showErrorInfo)}},{key:"showErrorInfo",value:function(t){this.elements.showInfo("Network Error")}},{key:"showReponseData",value:function(t){var e=t;"object"!=(void 0===e?"undefined":n(e))||Array.isArray(e)||(e=e.msg);var i=this.filter.result(e),s=i.msg,r=i.say;return this.boltMsg(s,r),t}},{key:"boltMsg",value:function(t,e){this.filter.texttoSpeech.speak(e),this.elements.elementAppendChild("bolt",t),this.search.value=""}},{key:"getData",value:function(){var t=this.search.value;if(t){if(this.elements.elementAppendChild("self",t),this.filter.multipleChoice){var e=this.filter.checkValidInput(t),i=e.msg,n=e.say,s=e.multipleChoice;return this.boltMsg(i,n),void(this.filter.multipleChoice=s)}this.wikiSearch(t)}}},{key:"json",value:function(t){return t.json()}},{key:"status",value:function(t){return t.status>=200&&t.status<300?Promise.resolve(t):Promise.reject(t.statusText)}}]),t}();i.default=r},{}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.multipleChoice=!1,this.dataArray=[],this.elements=e,this.speechtoText=void 0,this.texttoSpeech=void 0,this.mic=void 0,this.timerID=void 0,this.addProperties=this.addProperties.bind(this),this.result=this.result.bind(this),this.checkValidInput=this.checkValidInput.bind(this),this.startVoiceCmd=this.startVoiceCmd.bind(this)}return n(t,[{key:"addProperties",value:function(t,e,i){this.speechtoText=t,this.texttoSpeech=e,this.mic=i}},{key:"checkValidInput",value:function(t){if("quit"==t){return{msg:"operation aborted",say:"Goodbye.",multipleChoice:!1}}if(t=Number(t),String(t)==String(NaN)||t>this.dataArray.length||t<=0){this.timerID&&(clearTimeout(this.timerID),this.timerID=void 0);return{msg:'You entered invalid option.\n        \nTry again or\nEnter "quit" to abort',say:"Invalid choice, try again",multipleChoice:!0}}var e=this.dataArray[t-1];return{msg:e,say:e,multipleChoice:!1}}},{key:"createOptions",value:function(t){var e="",i=t[1];this.multipleChoice=!0,this.dataArray=t[2];for(var n=0;n<i.length;n++)e+=" \n ["+(n+1)+"] => "+i[n]+" ";return e}},{key:"hasInvalidData",value:function(t){return!(!/^(.*:)$/gim.test(t)&&-1==t.indexOf("From an alternative name:")&&-1==t.indexOf("From a misspelling:")&&-1==t.indexOf("From a page move:")&&-1==t.indexOf("From an alternative name:")&&-1==t.indexOf("Something may refer to:")&&-1==t.indexOf("From an initialism:")&&""!=t)}},{key:"removeInvalidResult",value:function(t){for(var e=t[0],i=t[1],n=t[2],s=[],r=[],o=n.length,a=0;a<o;a++)this.hasInvalidData(n[a])||(s.push(i[a]),r.push(n[a]));return[e,s,r]}},{key:"result",value:function(t){if(!Array.isArray(t)){return{msg:t,say:t}}if(!t[1].length||1==t[1].length&&""==t[2][0]||1==t[1].length&&this.hasInvalidData(t[2][0])){return{msg:'"'+t[0]+'" not found',say:"Please narrow your search"}}if(1!=t[1].length||""==t[2][0]||this.hasInvalidData(t[2][0])){if(1==(t=this.removeInvalidResult(t))[1].length){return{msg:t[2][0],say:t[2][0]}}if(!t[1].length){return{msg:'"'+t[0]+'" not found',say:"Please narrow your search"}}return{msg:"Choose from the options: "+this.createOptions(t),say:"choose from the options"}}return{msg:t[2][0],say:t[2][0]}}},{key:"startVoiceCmd",value:function(){this.speechtoText.start(this.mic),this.elements.activateCtrlBtn(this.mic)}}]),t}();i.default=s},{}],4:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){c.value=t.target.value}var r=n(t("./Elements")),o=n(t("./Filter")),a=n(t("./FetchData")),h=n(t("./TexttoSpeech")),u=n(t("./SpeechtoText")),l=document.getElementById("send"),c=document.getElementById("search"),f=document.getElementById("chat-scroll"),d=document.getElementById("mic"),m=document.getElementById("speaker"),p=document.getElementById("info"),v=new r.default(f,p),y=new o.default(v),g=new a.default(y,c),b=window.speechSynthesis,w=window.SpeechSynthesisUtterance,k=new h.default(b,w,v),I=window.SpeechRecognition||window.webkitSpeechRecognition,C=new u.default(I,g,k);y.addProperties(C,k,d),window.addEventListener("load",function(t){g.welcomeMsg(),c.focus()}),c.addEventListener("change",s),c.addEventListener("focus",s),c.addEventListener("keyup",function(t){13==t.keyCode&&g.getData()}),l.addEventListener("click",function(t){g.getData()}),d.addEventListener("click",function(t){v.toggleCtrlBtn(this,C)}),m.addEventListener("click",function(t){v.toggleCtrlBtn(this,k)})},{"./Elements":1,"./FetchData":2,"./Filter":3,"./SpeechtoText":5,"./TexttoSpeech":6}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fetchData=i,this.elements=this.fetchData.elements,this.search=this.fetchData.search,this.elementID=void 0,this.running=!1,this.temp=!1,this.texttoSpeech=n,this.error=this.error.bind(this),this.end=this.end.bind(this),this.start=this.start.bind(this),this.textFromSpeech=this.textFromSpeech.bind(this),e?(this.initilize(e),this.available=!0):this.available=!1}return n(t,[{key:"initilize",value:function(t){this.recognition=new t,this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.onresult=this.textFromSpeech,this.recognition.onend=this.end,this.recognition.onerror=this.error}},{key:"end",value:function(){this.running?this.recognition.start():this.elements.deactivateCtrlBtn(this.elementID),this.fetchData.getData()}},{key:"error",value:function(t){"no-speech"==t.error?this.elements.showInfo("No speech"):"audio-capture"==t.error?this.elements.showInfo("No audio input"):"network"==t.error&&this.elements.showInfo("Network Error"),this.running||this.elements.deactivateCtrlBtn(this.elementID)}},{key:"instance",value:function(){return this.recognition}},{key:"start",value:function(t){return this.elementID=t,this.search.value="",this.available?(this.running?(this.recognition.stop(),this.running=!1):(this.recognition.start(),this.running=!0),!0):(this.elements.showInfo("Speech to text not supported"),!1)}},{key:"support",value:function(){return this.available}},{key:"textFromSpeech",value:function(t){this.search.value="";var e=Array.from(t.results).map(function(t){return t[0]}).map(function(t){return t.transcript}).join("");this.texttoSpeech.pause||(this.search.value=e)}}]),t}();i.default=s},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.synth=e,this.speechSynth=i,this.elements=n,this.running=!1,this.pause=!1,this.utterThis=void 0,this.timerID=void 0,this.start=this.start.bind(this),this.speak=this.speak.bind(this),this.ispaused=this.ispaused.bind(this),this.available=!!e}return n(t,[{key:"speak",value:function(t){var e=this;if(this.running){this.pause=!0;var i=this.speechSynth,n=this.synth.getVoices();this.utterThis=new i(t),this.utterThis.voice=n.length?n[0]:void 0,this.synth.speak(this.utterThis),this.utterThis.onend=function(t){clearTimeout(e.timerID),e.timerID=void 0,e.timerID=setTimeout(function(){return e.pause=!1},10)}}}},{key:"ispaused",value:function(){return this.pause}},{key:"start",value:function(t){return this.available?(this.running=!this.running,!0):(this.elements.showInfo("Text to speech not supported"),!1)}}]),t}();i.default=s},{}]},{},[4]);